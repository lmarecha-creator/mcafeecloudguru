---
title: "Vulnerability Scan"
date: 2018-10-03T10:14:46-07:00
draft: false
weight: 40
---


####ODS Vulnerabilities for ACS containers images 

Of course, the previously provided container images don't contain any vulnerabilities :) - Now, let's work on a vulnerable image.

1 - Run the following command in **Azure Cloud Shell** to clone the dockerfile we've prepared

```
git clone https://github.com/lmarecha-creator/containers_CVE.git
```


2 - Retreive your Azure Subscription ID

```
az login
```
![Containers](/images/mfe/contain1.png?classes=border,shadow)

As requested, connect to https://microsoft.com/devicelogin and enter the code previously provided to you, then select your Azure admin user.

You should then see in Azure Cloud Shell your tenant details, with your subscription ID :

![Containers](/images/mfe/contain2.png?classes=border,shadow)

3 - Now, let's build, tag and push to ACR our container image with the following commands :

```
cd containers_CVE/
```

```
az acr build --registry YOUR_REGISTRY --subscription YOUR_SUBSCRIPTION_ID --image my_vulnerable:v1 --file ./dockerfile .
```
![Containers](/images/mfe/contain3.png?classes=border,shadow)

Now, by browsing the Azure GUI, you should see your container image :

![Containers](/images/mfe/contain4.png?classes=border,shadow)

4 - We will now **create a MVC policy** for Vulnerable Container images - First, let's connect and authenticate to https://http://auth.ui.mcafee.com/, then browse **POLICIES > VULNERABILITIES**. Then create a policy called “Azure-Workshop“ with the following settings :

![Containers](/images/mfe/contain5.png?classes=border,shadow)

5 - Let's now create an ODS configuration - in the MVC Dashboard, browse **POLICY > ON-DEMAND SCAN** then apply the following settings :

a# **Scan Type** : Vulnerability

b# **Name** : Azure-Workshop

c# **Instance** : You Azure Instance

d# **Select Policy** : Azure Workshop

e# **Data Scope** : Full

f# **Scan Dates** : All

g# **Repositories to Scan** : All Repositories

h# **Subscriptions** : All Subscriptions

i# **Frequency** : Nonce (On-Demand Only)

![Containers](/images/mfe/contain6.png?classes=border,shadow)

5 - Run your'Azure-Workshop'scan and wait till it completes successfully - Then check if you are reported with incidents :

![Containers](/images/mfe/contain8.png?classes=border,shadow)

![Containers](/images/mfe/contain9.png?classes=border,shadow)

![Containers](/images/mfe/container1.png?classes=border,shadow)

**BRAVO !**
